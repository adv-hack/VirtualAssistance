if not exists (select object_id from sys.objects where type = 'P' and name = 'spConsensusLearningCourseFetchByCourseParentid')
  exec ('create procedure dbo.spConsensusLearningCourseFetchByCourseParentid as select 1 as temp')
go
alter procedure dbo.spConsensusLearningCourseFetchByCourseParentid (@PA_COURSE_PRODUCT_ID varchar(11) = null output) as 
begin
  select 
  null as COURSE_ID,
    null as COURSE_LOCK,
    null as COURSE_ADD_DATE,
    null as COURSE_ADD_BY,
    null as COURSE_MOD_DATE,
    null as COURSE_MOD_BY,
    null as COURSE_RCV_DATE,
    null as COURSE_RCV_FROM,
	PROD_NAME AS COURSE_NAME,
	PROD_MAX_ATTEND AS COURSE_MAX_PLACES,
	PROD_MIN_ATTEND AS COURSE_MIN_PLACES,
	PROD_COURSE_LEN AS COURSE_LENGTH,
	PROD_WEB AS	COURSE_WEB,
	PROD_COST_CODE AS COURSE_COST_CODE,
    PROD_REV_CODE AS COURSE_REV_CODE,
	PROD_SELCO_SP_ID AS COURSE_SELCO_SP_ID,
	PROD_ORG_ID AS COURSE_ORG_ID,
	PROD_LOC_ID AS COURSE_LOC_ID,
	ADDXREF_ADD_ID AS COURSE_ADD_ID,
    PROLE_PERSON_ID as COURSE_PERSON_ID,
    @PA_COURSE_PRODUCT_ID as COURSE_PRODUCT_ID,
    PROD_REF as COURSE_REF,
    null as COURSE_TYPE,
    null as COURSE_SECTOR,
    null as COURSE_ON_SITE,
    null as COURSE_BLOCK_PRICD,
    null as COURSE_START_DATE,
    null as COURSE_END_DATE,
    null as COURSE_STATUS,
    null as COURSE_DIARY_TYPE,
    null as COURSE_FREE_PLACES,
	null as  COURSE_CONF_PLACES,
	null as   COURSE_PROVIS_BKGS,
	null as    COURSE_RESV_PLACES,
    null as COURSE_WAITING,
    null as COURSE_CANCELS,
    null as COURSE_BLOCK_THRES,
    null as COURSE_BLOCK_PRICE,
    null as COURSE_STUDT_PRICE,
    null as COURSE_EST_PUR_PRC,
    null as COURSE_NO_HOURS,
    null as COURSE_VAT_CODE,
    null as COURSE_JN_INF_ORDE,
    null as COURSE_NOTES,
    null as COURSE_TUC_REGION,
    null as COURSE_BUDGET,
    null as COURSE_ACTUAL,
    null as COURSE_PAY_FAG,
    null as COURSE_PAY_DATE,
    null as COURSE_PAY_CHEQ_NO,
    null as COURSE_COLL_INV_NO,
    null as COURSE_INCL_OUTLIN,
    null as COURSE_INCL_MAP,
    null as COURSE_INC_SPC_INS,
   null as  COURSE_INCL_BK_FRM,
    null as COURSE_INC_PST_QST,
    null as COURSE_INC_PRE_SRV,
    null as COURSE_BUD_PERIOD,
    null as COURSE_BUD_FORECST,
    null as COURSE_SOURCE_CODE,
    null as COURSE_PERSON_ID_2,
    null as COURSE_CLASS,
    null as COURSE_HOST_NAME,
    null as COURSE_VENU_ACTUAL,
    null as COURSE_VENU_BUDGET,
    null as COURSE_CATER_ACTUL,
    null as COURSE_CATER_BDGET,
    null as COURSE_HOTEL_ACTUL,
    null as COURSE_HOTEL_BDGET,
    null as COURSE_EQUIP_ACTUL,
    null as COURSE_EQUIP_BDGET,
    null as COURSE_TRAV_ACTUAL,
    null as COURSE_TRAV_BUDGET,
    null as COURSE_EXP_ACTUAL,
    null as COURSE_EXP_BUDGET,
    null as COURSE_OTHR_ACTUAL,
    null as COURSE_OTHR_BUDGET,
    null as COURSE_QUEST_LETT,
    null as COURSE_SURV_LETT,
    null as COURSE_BOOK_ACTUAL,
    null as COURSE_ACTUAL_TOT,
    null as COURSE_INCL_JOIN,
   null as  COURSE_INC_CONFIRM,
    null as COURSE_JOIN_LETT,
    null as COURSE_CONFRM_LETT,
    null as COURSE_PROV_LETT,
    null as COURSE_INV_LETT,
    null as COURSE_DO_NOT_INVC,
    null as COURSE_CANCEL_DATE,
    null as COURSE_CANCEL_BY,
    null as COURSE_INC_CSH_INV,
    null as COURSE_INC_PRO_FRM,
    null as COURSE_INC_RECEIPT,
    null as COURSE_CMC,
    null as COURSE_PL_ID,
    null as COURSE_SUPPLIER_ID,
    null as COURSE_BREAK_EVEN,
    null as COURSE_CHANGE_HIST,
    null as COURSE_BIP,
    null as COURSE_QUEST_ID,
    null as COURSE_POST_ID,
    null as COURSE_ORDER_NO,
    null as COURSE_PROV_PACK,
    null as COURSE_CONF_PACK,
    null as COURSE_JOINING_PACK,
    null as COURSE_POST_PACK,
    null as COURSE_PROV_INV,
    null as COURSE_CONF_INV,
    null as COURSE_JOIN_INV,
    null as COURSE_POST_INV,
    null as COURSE_PERIOD,
    null as COURSE_SEARCH_NAME,
    null as COURSE_EVR_ID,
    null as COURSE_OPP_ID,
    null as COURSE_SESS_COUNT,
	null as  COURSE_PRIVATE,
	null as  COURSE_PLAN_ID,
    null as COURSE_PLAN_NAME,
    null as COURSE_WEB,
    null as COURSE_GRADES,
    null as COURSE_DESC_TXT_ID,
    null as COURSE_TARG_TXT_ID,
    null as COURSE_SETUP_TIME,
    null as COURSE_DATE_DEC,
    null as COURSE_NUM_INVITE,
    null as COURSE_PERSON_ID_3,
    null as COURSE_PERSON_ID_4,
    null as COURSE_BU_ID,
    null as COURSE_USERNUM_1,
    null as COURSE_USERNUM_2,
    null as COURSE_URL,
    null as COURSE_PROJ_ID,
    null as COURSE_CODE,
    null as COURSE_BT_ID,
    null as COURSE_COMMENTS,
    null as COURSE_3RD_PARTY,
    null as COURSE_U_DATE_1,
    null as COURSE_U_DATE_2,
    null as COURSE_U_DATE_3,
    null as COURSE_U_DATE_4,
    null as COURSE_USERNUM_3,
    null as COURSE_NAME2,
    null as COURSE_USERCHAR_1,
    null as COURSE_USERCHAR_2,
    null as COURSE_USERCHAR_3,
    null as COURSE_USERCHAR_4,
    null as COURSE_SUP_ROLE_ID,
    null as COURSE_CURRENCY,
    null as COURSE_PRICE_A,
    null as COURSE_PRICE_B,
    null as COURSE_PRICE_C,
    null as COURSE_PRICE_D,
    null as COURSE_PRICE_E,
    null as COURSE_CHARGABLE,
    null as COURSE_USERNUM_4,
    null as COURSE_USERNUM_5,
    null as COURSE_USERNUM_6,
    null as COURSE_USERNUM_7,
    null as COURSE_INVOICED,
    null as COURSE_BKT_ID,
    null as COURSE_CONTPROL_ID,
    null as COURSE_BUD_REV,
    null as COURSE_BUD_FORCAST,
    null as COURSE_U_DATE_5,
    null as COURSE_U_DATE_6,
    null as COURSE_USERCHAR_5,
    null as COURSE_USERCHAR_6,
    null as COURSE_U_TINT_1,
    null as COURSE_U_TINT_2,
    null as COURSE_U_TINT_3,
    null as COURSE_U_TINT_4,
    null as COURSE_U_TINT_5,
    null as COURSE_U_TINT_6,
    null as COURSE_SY_TYPE,
    null as COURSE_PREJOIN_PACK,
    null as COURSE_PSTJOIN_PACK,
    null as COURSE_BOOK_ACT_BC2,
    null as COURSE_ACT_TOT_BC2,
    null as COURSE_PROV_SENT_DTE,
    null as COURSE_CONF_SENT_DTE,
    null as COURSE_JOIN_SENT_DTE,
    null as COURSE_PP_SENT_DTE,
    null as COURSE_PRJOIN_SENT_DTE,
    null as COURSE_POJOIN_SENT_DTE,
    null as COURSE_CUT_PRD,
    null as COURSE_SUP_STATUS,
    null as COURSE_OVERBOOK,
    null as COURSE_PROV_ORG_ID,
    null as COURSE_PROV_PROLE_ID,
    null as COURSE_ALLOC_STATUS,
    null as COURSE_EST_HOURS,
    null as COURSE_FLOAT,
    null as COURSE_ACT_HOURS,
    null as COURSE_NOTES2,
	null as  COURSE_NOTES3,
    null as COURSE_FUNDED,
    null as COURSE_FUNDED_ORG_ID,
    null as COURSE_QUAL_DEL,
    null as COURSE_COH_ONLY,
    null as COURSE_ANALYSIS_1,
    null as COURSE_ANALYSIS_2,
    null as COURSE_RESERVATIONS,
    null as COURSE_DEF_ELEM_ST,
    null as COURSE_LAPSED,
    null as COURSE_INT_NOTES,
    null as COURSE_BD_COMP_BY,
    null as COURSE_BD_COMP_DATE,
	null as  COURSE_BD_TOT_ACT_COST,
    null as COURSE_BD_STATUS,
    null as COURSE_SUBS,
    null as COURSE_TRANSFERS,
    null as COURSE_HAS_TRAINER,
    null as COURSE_BD_PREP_BY,
    null as COURSE_BD_PREP_DATE,
    null as COURSE_BD_APP_BY,
    null as COURSE_BD_APP_DATE,
    null as COURSE_BD_TOT_EST_COST,
    null as COURSE_CALC_COMMISSION,
    null as COURSE_BAT_ID,
    null as COURSE_CANCEL_PACK,
    null as COURSE_CANP_SENT_DTE,
    null as COURSE_CANCELLATION_DATE,
    null as COURSE_REASON,
    null as COURSE_UNRECOVERABLE_CANC_LOSS,
    null as COURSE_DEFAULT_TRAINEE_DAYS,
    null as COURSE_GRANT_ELIGABLE,
    null as COURSE_GRANT_VALUE_AVAILABLE,
    null as COURSE_BREAKEVEN_VALUE1,
    null as COURSE_BREAKEVEN_VALUE2,
    null as COURSE_EXT_COURSEWARE,
    null as COURSE_CONTINGENCY,
    null as COURSE_COST,
    null as COURSE_DELIVERY_DAYS,
    null as COURSE_MTR_PROLE_ID,
    null as COURSE_MA_PROLE_ID,
    null as COURSE_ACADY_CODE,
    null as COURSE_NO_AUTO_UPDATE,
    null as COURSE_COURSE_ID,
    null as COURSE_USERMULTI_1,
    null as COURSE_CLONE,
    null as COURSE_OUT_OF_HOURS,
    null as COURSE_STOP_TRAIN_COMPLETION,
    null as COURSE_BD_ORIG_COST,
    null as COURSE_ORDER,
    null as COURSE_ELEM_ID,
    null as COURSE_CODE_LOOKUP1,
    null as COURSE_PSH_ID,
    null as COURSE_BLOCK_TYPE,
    null as COURSE_ATT_MOD_BY,
    null as COURSE_ATT_MOD_DATE,
    null as COURSE_AVAIL,
    null as COURSE_FIRST_LIC_EVENT,
    null as COURSE_TRNP_ID,
    null as COURSE_LICENSED,
    null as COURSE_RESULT_REC_DATE,
    null as COURSE_PAPERS_REC_DATE,
    null as COURSE_CERT_ISSUE_DATE,
    null as COURSE_DEL_IMP_DATE,
    null as COURSE_ITEMS_RECEIVED_DATE,
    null as COURSE_DELIV_METHD,
    null as COURSE_PACK_SEND_PROLE_ID,
    null as COURSE_PACK_BCC_EMAIL,
    null as COURSE_PACK_MDN_EMAIL,
    null as COURSE_PACK_DSN_EMAIL,
    null as COURSE_PACK_DSN_OPTIONS,
    null as COURSE_CODE_IMAGE,
    null as COURSE_CLIENT_REF,
    null as COURSE_SESSIONS_DESCRIPTION,
    null as COURSE_SESSIONS_HEADER,
    null as COURSE_CUT_PRD_TIME,
	(select min(BOM_START_TIME)
					From dbo.Bill_Of_Material 
					Where BOM_PARENT_ID = @PA_COURSE_PRODUCT_ID
					and BOM_SESSION = 1 and BOM_REAL = 1 and BOM_TYPE = 'Syllabus') AS COURSE_START_TIME,
	(select  max(BOM_END_TIME)
					From dbo.Bill_Of_Material 
					Where BOM_PARENT_ID = @PA_COURSE_PRODUCT_ID
					and BOM_SESSION = 1 and BOM_REAL = 1 and BOM_TYPE = 'Syllabus') AS COURSE_END_TIME
	 from product p left join dbo.address_xref on addxref_org_id = p.PROD_ORG_ID and addxref_principal = 1
	 left join dbo.PERSON_ROLE pr on PROLE_ID = PROD_PROLE_ID
	 where prod_id = @PA_COURSE_PRODUCT_ID

end
go
