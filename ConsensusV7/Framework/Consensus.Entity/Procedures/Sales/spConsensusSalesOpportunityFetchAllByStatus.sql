if not exists (select object_id from sys.objects where type = 'P' and name = 'spConsensusSalesOpportunityFetchAllByStatus')
  exec ('create procedure dbo.spConsensusSalesOpportunityFetchAllByStatus as select 1 as temp')
go
alter procedure dbo.spConsensusSalesOpportunityFetchAllByStatus(@PA_OPP_STATUS varchar(40) = null output) as 
begin
  select 
    OPP_ID,
    OPP_LOCK,
    OPP_ADD_DATE,
    OPP_ADD_BY,
    OPP_MOD_DATE,
    OPP_MOD_BY,
    OPP_RCV_DATE,
    OPP_RCV_FROM,
    OPP_QUO_ID,
    OPP_PROM_ID,
    OPP_PROLE_ID_SALES,
    OPP_PROLE_ID_TAKEN,
    OPP_SCH_ID,
    OPP_TEXT_ID,
    OPP_TEXT_ID_HIS,
    OPP_STATUS,
    OPP_STATUS_MKT,
    OPP_PERIOD,
    OPP_DATE_ENQ,
    OPP_DATE_DEC,
    OPP_VAL_POT,
    OPP_VAL_SOLD,
    OPP_LOST_TO,
    OPP_LOST_REA,
    OPP_DATE_NEXT,
    OPP_QUO_REF,
    OPP_QUO_DATE,
    OPP_QUO_VAL,
    OPP_NAME,
    OPP_NOTES,
    OPP_PROB_PURCH,
    OPP_PROB_WIN,
    OPP_DATE_ROL_START,
    OPP_PERD_ROLL,
    OPP_INC_ROLL,
    OPP_INC_START,
    OPP_INC_END,
    OPP_DATE_ROLL_END,
    OPP_NOTE_ROLL,
    OPP_ROLL_QTY,
    OPP_ROLL_COST,
    OPP_ROLL_RET,
    OPP_VAL_POT_BC,
    OPP_VAL_SOLD_BC,
    OPP_QUO_VAL_BC,
    OPP_PROD_INTEREST,
    OPP_SM_FORCST_DATE,
    OPP_SM_VALUE,
    OPP_SM_VALUE_BC,
    OPP_PROB_WIN_SM,
    OPP_CURRENCY_TYPE,
    OPP_EXEC_CODE,
    OPP_TYPE_CHAN_DATE,
    OPP_PURCH_ORD_NO,
    OPP_SUBSP_PER_FROM,
    OPP_SUBSRIP_PER_TO,
    OPP_BASIC_ACT_VAL,
    OPP_MAT_ACT_VAL,
    OPP_TOT_ACT_VAL,
    OPP_BASIC_DISC_VAL,
    OPP_MAT_DISC_VAL,
    OPP_TOT_DISC_VAL,
    OPP_BS_ACT_INV_VAL,
    OPP_MT_ACT_INV_VAL,
    OPP_TOT_AT_INV_VAL,
    OPP_BASIC_ANN_VAL,
    OPP_MAT_ANNUAL_VAL,
    OPP_TOT_ANNUAL_VAL,
    OPP_BSC_ACT_VAL_BC,
    OPP_MAT_ACT_VAL_BC,
    OPP_TOT_ACT_VAL_BC,
    OPP_BSC_DSC_VAL_BC,
    OPP_MAT_DSC_VAL_BC,
    OPP_TOT_DSC_VAL_BC,
    OPP_BC_AT_IN_VL_BC,
    OPP_MT_AT_IN_VL_BC,
    OPP_TT_AT_IN_VL_BC,
    OPP_BSC_ANN_VAL_BC,
    OPP_MAT_ANN_VAL_BC,
    OPP_TOT_ANN_VAL_BC,
    OPP_MEDIUM,
    OPP_FREQUENCY,
    OPP_TAILOR_MADE_NO,
    OPP_DISPATCH_DATE,
    OPP_DISPTCH_METHOD,
    OPP_SERVPROD_TEXT,
    OPP_DATE_ON_PRINT,
    OPP_PIC_ID,
    OPP_ORG_ID_USER,
    OPP_ACT_ID,
    OPP_USERNUM_1,
    OPP_USERCHAR_1,
    OPP_USERCHAR_2,
    OPP_USERCHAR_3,
    OPP_USERCHAR_4,
    OPP_COMPETITOR,
    OPP_USE_ROLL_OUT,
    OPP_USERCHAR_5,
    OPP_NX_STAGE,
    OPP_STAGE_DT,
    OPP_CAME_FROM_ID,
    OPP_PROJ_ID,
    OPP_OPP_ID,
    OPP_CAME_FROM,
    OPP_OPTIM_LOCK,
    OPP_ADD_PERIOD,
    OPP_TERR_ID,
    OPP_DESC,
    OPP_TYPE,
    OPP_COMMIT,
    OPP_CONT_TYPE,
    OPP_ORIG_FORCST_DT,
    OPP_LOST_EXP,
    OPP_SELCO_SP_ID,
    OPP_SALES_TYPE,
    OPP_USERCHAR_6,
    OPP_USERINT_1,
    OPP_USERINT_2,
    OPP_USERINT_3,
    OPP_USERINT_4,
    OPP_USERINT_5,
    OPP_USERINT_6,
    OPP_USERNUM_2,
    OPP_USERNUM_3,
    OPP_USERNUM_4,
    OPP_USERNUM_5,
    OPP_USERNUM_6,
    OPP_USERDATE_1,
    OPP_USERDATE_2,
    OPP_USERDATE_3,
    OPP_USERDATE_4,
    OPP_USERDATE_5,
    OPP_USERDATE_6,
    OPP_EXT_PROJ_ID,
    OPP_COURSE_ID,
    OPP_PROD_ID,
    OPP_MEM_ID,
    OPP_COST_CODE,
    OPP_SERVICE,
    OPP_DROPDOWN_1,
    OPP_DROPDOWN_2,
    OPP_DROPDOWN_3,
    OPP_DROPDOWN_4,
    OPP_USERDATE_7,
    OPP_USERDATE_8,
    OPP_SCHN_ID,
    OPP_REAS_DELAY,
    OPP_RATIONALE,
    OPP_ORIG_ENQUIRY_TYPE,
    OPP_SEARCH_GROUP,
    OPP_SY_TYPE
  from dbo.Opportunity
  where OPP_STATUS = @PA_OPP_STATUS
end
go
