if not exists (select object_id from sys.objects where type = 'P' and name = 'spConsensusSalesOpportunityModify')
  exec ('create procedure dbo.spConsensusSalesOpportunityModify as select 1 as temp')
go
alter procedure dbo.spConsensusSalesOpportunityModify(@PA_OPP_ID varchar(11) = null output, @PA_OPP_LOCK varchar(10) = null output, @PA_OPP_QUO_ID varchar(11) = null output, @PA_OPP_PROM_ID varchar(11) = null output, @PA_OPP_PROLE_ID_SALES varchar(11) = null output, @PA_OPP_PROLE_ID_TAKEN varchar(11) = null output, @PA_OPP_SCH_ID varchar(11) = null output, @PA_OPP_TEXT_ID varchar(11) = null output, @PA_OPP_TEXT_ID_HIS varchar(11) = null output, @PA_OPP_STATUS varchar(40) = null output, @PA_OPP_STATUS_MKT varchar(25) = null output, @PA_OPP_PERIOD varchar(8) = null output, @PA_OPP_DATE_ENQ datetime = null output, @PA_OPP_DATE_DEC datetime = null output, @PA_OPP_VAL_POT float = null output, @PA_OPP_VAL_SOLD float = null output, @PA_OPP_LOST_TO varchar(35) = null output, @PA_OPP_LOST_REA varchar(250) = null output, @PA_OPP_DATE_NEXT datetime = null output, @PA_OPP_QUO_REF varchar(15) = null output, @PA_OPP_QUO_DATE datetime = null output, @PA_OPP_QUO_VAL float = null output, @PA_OPP_NAME varchar(80) = null output, @PA_OPP_NOTES varchar(max) = null output, @PA_OPP_PROB_PURCH tinyint = null output, @PA_OPP_PROB_WIN tinyint = null output, @PA_OPP_DATE_ROL_START datetime = null output, @PA_OPP_PERD_ROLL varchar(1) = null output, @PA_OPP_INC_ROLL tinyint = null output, @PA_OPP_INC_START datetime = null output, @PA_OPP_INC_END datetime = null output, @PA_OPP_DATE_ROLL_END datetime = null output, @PA_OPP_NOTE_ROLL varchar(250) = null output, @PA_OPP_ROLL_QTY float = null output, @PA_OPP_ROLL_COST float = null output, @PA_OPP_ROLL_RET float = null output, @PA_OPP_VAL_POT_BC float = null output, @PA_OPP_VAL_SOLD_BC float = null output, @PA_OPP_QUO_VAL_BC float = null output, @PA_OPP_PROD_INTEREST varchar(35) = null output, @PA_OPP_SM_FORCST_DATE datetime = null output, @PA_OPP_SM_VALUE float = null output, @PA_OPP_SM_VALUE_BC float = null output, @PA_OPP_PROB_WIN_SM tinyint = null output, @PA_OPP_CURRENCY_TYPE varchar(3) = null output, @PA_OPP_EXEC_CODE varchar(10) = null output, @PA_OPP_TYPE_CHAN_DATE datetime = null output, @PA_OPP_PURCH_ORD_NO varchar(20) = null output, @PA_OPP_SUBSP_PER_FROM datetime = null output, @PA_OPP_SUBSRIP_PER_TO datetime = null output, @PA_OPP_BASIC_ACT_VAL float = null output, @PA_OPP_MAT_ACT_VAL float = null output, @PA_OPP_TOT_ACT_VAL float = null output, @PA_OPP_BASIC_DISC_VAL float = null output, @PA_OPP_MAT_DISC_VAL float = null output, @PA_OPP_TOT_DISC_VAL float = null output, @PA_OPP_BS_ACT_INV_VAL float = null output, @PA_OPP_MT_ACT_INV_VAL float = null output, @PA_OPP_TOT_AT_INV_VAL float = null output, @PA_OPP_BASIC_ANN_VAL float = null output, @PA_OPP_MAT_ANNUAL_VAL float = null output, @PA_OPP_TOT_ANNUAL_VAL float = null output, @PA_OPP_BSC_ACT_VAL_BC float = null output, @PA_OPP_MAT_ACT_VAL_BC float = null output, @PA_OPP_TOT_ACT_VAL_BC float = null output, @PA_OPP_BSC_DSC_VAL_BC float = null output, @PA_OPP_MAT_DSC_VAL_BC float = null output, @PA_OPP_TOT_DSC_VAL_BC float = null output, @PA_OPP_BC_AT_IN_VL_BC float = null output, @PA_OPP_MT_AT_IN_VL_BC float = null output, @PA_OPP_TT_AT_IN_VL_BC float = null output, @PA_OPP_BSC_ANN_VAL_BC float = null output, @PA_OPP_MAT_ANN_VAL_BC float = null output, @PA_OPP_TOT_ANN_VAL_BC float = null output, @PA_OPP_MEDIUM varchar(40) = null output, @PA_OPP_FREQUENCY varchar(20) = null output, @PA_OPP_TAILOR_MADE_NO varchar(9) = null output, @PA_OPP_DISPATCH_DATE datetime = null output, @PA_OPP_DISPTCH_METHOD varchar(20) = null output, @PA_OPP_SERVPROD_TEXT varchar(255) = null output, @PA_OPP_DATE_ON_PRINT datetime = null output, @PA_OPP_PIC_ID varchar(11) = null output, @PA_OPP_ORG_ID_USER varchar(11) = null output, @PA_OPP_ACT_ID varchar(11) = null output, @PA_OPP_USERNUM_1 decimal(16, 2) = null output, @PA_OPP_USERCHAR_1 varchar(100) = null output, @PA_OPP_USERCHAR_2 varchar(100) = null output, @PA_OPP_USERCHAR_3 varchar(100) = null output, @PA_OPP_USERCHAR_4 varchar(100) = null output, @PA_OPP_COMPETITOR varchar(250) = null output, @PA_OPP_USE_ROLL_OUT tinyint = null output, @PA_OPP_USERCHAR_5 varchar(255) = null output, @PA_OPP_NX_STAGE varchar(11) = null output, @PA_OPP_STAGE_DT datetime = null output, @PA_OPP_CAME_FROM_ID varchar(80) = null output, @PA_OPP_PROJ_ID varchar(5) = null output, @PA_OPP_OPP_ID varchar(11) = null output, @PA_OPP_CAME_FROM varchar(80) = null output, @PA_OPP_OPTIM_LOCK varchar(11) = null output, @PA_OPP_ADD_PERIOD varchar(8) = null output, @PA_OPP_TERR_ID varchar(11) = null output, @PA_OPP_DESC varchar(200) = null output, @PA_OPP_TYPE tinyint = null output, @PA_OPP_COMMIT tinyint = null output, @PA_OPP_CONT_TYPE varchar(11) = null output, @PA_OPP_ORIG_FORCST_DT datetime = null output, @PA_OPP_LOST_EXP varchar(max) = null output, @PA_OPP_SELCO_SP_ID varchar(11) = null output, @PA_OPP_SALES_TYPE varchar(40) = null output, @PA_OPP_USERCHAR_6 varchar(100) = null output, @PA_OPP_USERINT_1 tinyint = null output, @PA_OPP_USERINT_2 tinyint = null output, @PA_OPP_USERINT_3 tinyint = null output, @PA_OPP_USERINT_4 tinyint = null output, @PA_OPP_USERINT_5 tinyint = null output, @PA_OPP_USERINT_6 tinyint = null output, @PA_OPP_USERNUM_2 decimal(16, 2) = null output, @PA_OPP_USERNUM_3 decimal(16, 2) = null output, @PA_OPP_USERNUM_4 decimal(16, 2) = null output, @PA_OPP_USERNUM_5 decimal(16, 2) = null output, @PA_OPP_USERNUM_6 decimal(16, 2) = null output, @PA_OPP_USERDATE_1 datetime = null output, @PA_OPP_USERDATE_2 datetime = null output, @PA_OPP_USERDATE_3 datetime = null output, @PA_OPP_USERDATE_4 datetime = null output, @PA_OPP_USERDATE_5 datetime = null output, @PA_OPP_USERDATE_6 datetime = null output, @PA_OPP_EXT_PROJ_ID varchar(10) = null output, @PA_OPP_COURSE_ID varchar(11) = null output, @PA_OPP_PROD_ID varchar(11) = null output, @PA_OPP_MEM_ID varchar(11) = null output, @PA_OPP_COST_CODE varchar(40) = null output, @PA_OPP_SERVICE varchar(40) = null output, @PA_OPP_DROPDOWN_1 varchar(25) = null output, @PA_OPP_DROPDOWN_2 varchar(25) = null output, @PA_OPP_DROPDOWN_3 varchar(25) = null output, @PA_OPP_DROPDOWN_4 varchar(25) = null output, @PA_OPP_USERDATE_7 datetime = null output, @PA_OPP_USERDATE_8 datetime = null output, @PA_OPP_SCHN_ID varchar(11) = null output, @PA_OPP_REAS_DELAY varchar(100) = null output, @PA_OPP_RATIONALE varchar(40) = null output, @PA_OPP_ORIG_ENQUIRY_TYPE varchar(100) = null output, @PA_OPP_SEARCH_GROUP varchar(40) = null output, @PA_OPP_SY_TYPE integer = null output, @_AUDIT_USER_ID varchar(3) = null) as 
begin
  update dbo.Opportunity set
    OPP_MOD_DATE = getDate(),
    OPP_MOD_BY = @_AUDIT_USER_ID,
    OPP_LOCK = @PA_OPP_LOCK,
    OPP_QUO_ID = @PA_OPP_QUO_ID,
    OPP_PROM_ID = @PA_OPP_PROM_ID,
    OPP_PROLE_ID_SALES = @PA_OPP_PROLE_ID_SALES,
    OPP_PROLE_ID_TAKEN = @PA_OPP_PROLE_ID_TAKEN,
    OPP_SCH_ID = @PA_OPP_SCH_ID,
    OPP_TEXT_ID = @PA_OPP_TEXT_ID,
    OPP_TEXT_ID_HIS = @PA_OPP_TEXT_ID_HIS,
    OPP_STATUS = @PA_OPP_STATUS,
    OPP_STATUS_MKT = @PA_OPP_STATUS_MKT,
    OPP_PERIOD = @PA_OPP_PERIOD,
    OPP_DATE_ENQ = @PA_OPP_DATE_ENQ,
    OPP_DATE_DEC = @PA_OPP_DATE_DEC,
    OPP_VAL_POT = @PA_OPP_VAL_POT,
    OPP_VAL_SOLD = @PA_OPP_VAL_SOLD,
    OPP_LOST_TO = @PA_OPP_LOST_TO,
    OPP_LOST_REA = @PA_OPP_LOST_REA,
    OPP_DATE_NEXT = @PA_OPP_DATE_NEXT,
    OPP_QUO_REF = @PA_OPP_QUO_REF,
    OPP_QUO_DATE = @PA_OPP_QUO_DATE,
    OPP_QUO_VAL = @PA_OPP_QUO_VAL,
    OPP_NAME = @PA_OPP_NAME,
    OPP_NOTES = @PA_OPP_NOTES,
    OPP_PROB_PURCH = @PA_OPP_PROB_PURCH,
    OPP_PROB_WIN = @PA_OPP_PROB_WIN,
    OPP_DATE_ROL_START = @PA_OPP_DATE_ROL_START,
    OPP_PERD_ROLL = @PA_OPP_PERD_ROLL,
    OPP_INC_ROLL = @PA_OPP_INC_ROLL,
    OPP_INC_START = @PA_OPP_INC_START,
    OPP_INC_END = @PA_OPP_INC_END,
    OPP_DATE_ROLL_END = @PA_OPP_DATE_ROLL_END,
    OPP_NOTE_ROLL = @PA_OPP_NOTE_ROLL,
    OPP_ROLL_QTY = @PA_OPP_ROLL_QTY,
    OPP_ROLL_COST = @PA_OPP_ROLL_COST,
    OPP_ROLL_RET = @PA_OPP_ROLL_RET,
    OPP_VAL_POT_BC = @PA_OPP_VAL_POT_BC,
    OPP_VAL_SOLD_BC = @PA_OPP_VAL_SOLD_BC,
    OPP_QUO_VAL_BC = @PA_OPP_QUO_VAL_BC,
    OPP_PROD_INTEREST = @PA_OPP_PROD_INTEREST,
    OPP_SM_FORCST_DATE = @PA_OPP_SM_FORCST_DATE,
    OPP_SM_VALUE = @PA_OPP_SM_VALUE,
    OPP_SM_VALUE_BC = @PA_OPP_SM_VALUE_BC,
    OPP_PROB_WIN_SM = @PA_OPP_PROB_WIN_SM,
    OPP_CURRENCY_TYPE = @PA_OPP_CURRENCY_TYPE,
    OPP_EXEC_CODE = @PA_OPP_EXEC_CODE,
    OPP_TYPE_CHAN_DATE = @PA_OPP_TYPE_CHAN_DATE,
    OPP_PURCH_ORD_NO = @PA_OPP_PURCH_ORD_NO,
    OPP_SUBSP_PER_FROM = @PA_OPP_SUBSP_PER_FROM,
    OPP_SUBSRIP_PER_TO = @PA_OPP_SUBSRIP_PER_TO,
    OPP_BASIC_ACT_VAL = @PA_OPP_BASIC_ACT_VAL,
    OPP_MAT_ACT_VAL = @PA_OPP_MAT_ACT_VAL,
    OPP_TOT_ACT_VAL = @PA_OPP_TOT_ACT_VAL,
    OPP_BASIC_DISC_VAL = @PA_OPP_BASIC_DISC_VAL,
    OPP_MAT_DISC_VAL = @PA_OPP_MAT_DISC_VAL,
    OPP_TOT_DISC_VAL = @PA_OPP_TOT_DISC_VAL,
    OPP_BS_ACT_INV_VAL = @PA_OPP_BS_ACT_INV_VAL,
    OPP_MT_ACT_INV_VAL = @PA_OPP_MT_ACT_INV_VAL,
    OPP_TOT_AT_INV_VAL = @PA_OPP_TOT_AT_INV_VAL,
    OPP_BASIC_ANN_VAL = @PA_OPP_BASIC_ANN_VAL,
    OPP_MAT_ANNUAL_VAL = @PA_OPP_MAT_ANNUAL_VAL,
    OPP_TOT_ANNUAL_VAL = @PA_OPP_TOT_ANNUAL_VAL,
    OPP_BSC_ACT_VAL_BC = @PA_OPP_BSC_ACT_VAL_BC,
    OPP_MAT_ACT_VAL_BC = @PA_OPP_MAT_ACT_VAL_BC,
    OPP_TOT_ACT_VAL_BC = @PA_OPP_TOT_ACT_VAL_BC,
    OPP_BSC_DSC_VAL_BC = @PA_OPP_BSC_DSC_VAL_BC,
    OPP_MAT_DSC_VAL_BC = @PA_OPP_MAT_DSC_VAL_BC,
    OPP_TOT_DSC_VAL_BC = @PA_OPP_TOT_DSC_VAL_BC,
    OPP_BC_AT_IN_VL_BC = @PA_OPP_BC_AT_IN_VL_BC,
    OPP_MT_AT_IN_VL_BC = @PA_OPP_MT_AT_IN_VL_BC,
    OPP_TT_AT_IN_VL_BC = @PA_OPP_TT_AT_IN_VL_BC,
    OPP_BSC_ANN_VAL_BC = @PA_OPP_BSC_ANN_VAL_BC,
    OPP_MAT_ANN_VAL_BC = @PA_OPP_MAT_ANN_VAL_BC,
    OPP_TOT_ANN_VAL_BC = @PA_OPP_TOT_ANN_VAL_BC,
    OPP_MEDIUM = @PA_OPP_MEDIUM,
    OPP_FREQUENCY = @PA_OPP_FREQUENCY,
    OPP_TAILOR_MADE_NO = @PA_OPP_TAILOR_MADE_NO,
    OPP_DISPATCH_DATE = @PA_OPP_DISPATCH_DATE,
    OPP_DISPTCH_METHOD = @PA_OPP_DISPTCH_METHOD,
    OPP_SERVPROD_TEXT = @PA_OPP_SERVPROD_TEXT,
    OPP_DATE_ON_PRINT = @PA_OPP_DATE_ON_PRINT,
    OPP_PIC_ID = @PA_OPP_PIC_ID,
    OPP_ORG_ID_USER = @PA_OPP_ORG_ID_USER,
    OPP_ACT_ID = @PA_OPP_ACT_ID,
    OPP_USERNUM_1 = @PA_OPP_USERNUM_1,
    OPP_USERCHAR_1 = @PA_OPP_USERCHAR_1,
    OPP_USERCHAR_2 = @PA_OPP_USERCHAR_2,
    OPP_USERCHAR_3 = @PA_OPP_USERCHAR_3,
    OPP_USERCHAR_4 = @PA_OPP_USERCHAR_4,
    OPP_COMPETITOR = @PA_OPP_COMPETITOR,
    OPP_USE_ROLL_OUT = @PA_OPP_USE_ROLL_OUT,
    OPP_USERCHAR_5 = @PA_OPP_USERCHAR_5,
    OPP_NX_STAGE = @PA_OPP_NX_STAGE,
    OPP_STAGE_DT = @PA_OPP_STAGE_DT,
    OPP_CAME_FROM_ID = @PA_OPP_CAME_FROM_ID,
    OPP_PROJ_ID = @PA_OPP_PROJ_ID,
    OPP_OPP_ID = @PA_OPP_OPP_ID,
    OPP_CAME_FROM = @PA_OPP_CAME_FROM,
    OPP_OPTIM_LOCK = @PA_OPP_OPTIM_LOCK,
    OPP_ADD_PERIOD = @PA_OPP_ADD_PERIOD,
    OPP_TERR_ID = @PA_OPP_TERR_ID,
    OPP_DESC = @PA_OPP_DESC,
    OPP_TYPE = @PA_OPP_TYPE,
    OPP_COMMIT = @PA_OPP_COMMIT,
    OPP_CONT_TYPE = @PA_OPP_CONT_TYPE,
    OPP_ORIG_FORCST_DT = @PA_OPP_ORIG_FORCST_DT,
    OPP_LOST_EXP = @PA_OPP_LOST_EXP,
    OPP_SELCO_SP_ID = @PA_OPP_SELCO_SP_ID,
    OPP_SALES_TYPE = @PA_OPP_SALES_TYPE,
    OPP_USERCHAR_6 = @PA_OPP_USERCHAR_6,
    OPP_USERINT_1 = @PA_OPP_USERINT_1,
    OPP_USERINT_2 = @PA_OPP_USERINT_2,
    OPP_USERINT_3 = @PA_OPP_USERINT_3,
    OPP_USERINT_4 = @PA_OPP_USERINT_4,
    OPP_USERINT_5 = @PA_OPP_USERINT_5,
    OPP_USERINT_6 = @PA_OPP_USERINT_6,
    OPP_USERNUM_2 = @PA_OPP_USERNUM_2,
    OPP_USERNUM_3 = @PA_OPP_USERNUM_3,
    OPP_USERNUM_4 = @PA_OPP_USERNUM_4,
    OPP_USERNUM_5 = @PA_OPP_USERNUM_5,
    OPP_USERNUM_6 = @PA_OPP_USERNUM_6,
    OPP_USERDATE_1 = @PA_OPP_USERDATE_1,
    OPP_USERDATE_2 = @PA_OPP_USERDATE_2,
    OPP_USERDATE_3 = @PA_OPP_USERDATE_3,
    OPP_USERDATE_4 = @PA_OPP_USERDATE_4,
    OPP_USERDATE_5 = @PA_OPP_USERDATE_5,
    OPP_USERDATE_6 = @PA_OPP_USERDATE_6,
    OPP_EXT_PROJ_ID = @PA_OPP_EXT_PROJ_ID,
    OPP_COURSE_ID = @PA_OPP_COURSE_ID,
    OPP_PROD_ID = @PA_OPP_PROD_ID,
    OPP_MEM_ID = @PA_OPP_MEM_ID,
    OPP_COST_CODE = @PA_OPP_COST_CODE,
    OPP_SERVICE = @PA_OPP_SERVICE,
    OPP_DROPDOWN_1 = @PA_OPP_DROPDOWN_1,
    OPP_DROPDOWN_2 = @PA_OPP_DROPDOWN_2,
    OPP_DROPDOWN_3 = @PA_OPP_DROPDOWN_3,
    OPP_DROPDOWN_4 = @PA_OPP_DROPDOWN_4,
    OPP_USERDATE_7 = @PA_OPP_USERDATE_7,
    OPP_USERDATE_8 = @PA_OPP_USERDATE_8,
    OPP_SCHN_ID = @PA_OPP_SCHN_ID,
    OPP_REAS_DELAY = @PA_OPP_REAS_DELAY,
    OPP_RATIONALE = @PA_OPP_RATIONALE,
    OPP_ORIG_ENQUIRY_TYPE = @PA_OPP_ORIG_ENQUIRY_TYPE,
    OPP_SEARCH_GROUP = @PA_OPP_SEARCH_GROUP,
    OPP_SY_TYPE = @PA_OPP_SY_TYPE
  where OPP_ID = @PA_OPP_ID;
end
go
