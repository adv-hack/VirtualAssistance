if not exists (select object_id from sys.objects where type = 'P' and name = 'spConsensusFinanceInvheaderModify')
  exec ('create procedure dbo.spConsensusFinanceInvheaderModify as select 1 as temp')
go
alter procedure dbo.spConsensusFinanceInvheaderModify(@PA_INV_ID varchar(11) = null output, @PA_INV_LOCK varchar(10) = null output, @PA_INV_BOOK_ID varchar(11) = null output, @PA_INV_ORG_ID varchar(11) = null output, @PA_INV_PERSON_ID varchar(11) = null output, @PA_INV_SALESMAN_ID varchar(11) = null output, @PA_INV_DELVRY_REF varchar(12) = null output, @PA_INV_CARRIER varchar(20) = null output, @PA_INV_DELVRY_DATE datetime = null output, @PA_INV_ORDER_DATE datetime = null output, @PA_INV_CUST_ORDER_NO varchar(35) = null output, @PA_INV_DELVRY_ADD varchar(11) = null output, @PA_INV_REF varchar(25) = null output, @PA_INV_DATE datetime = null output, @PA_INV_STATUS tinyint = null output, @PA_INV_ADD varchar(11) = null output, @PA_INV_CREDIT_NTE_REF varchar(12) = null output, @PA_INV_CREDIT_NTE_DTE datetime = null output, @PA_INV_CREDIT_NTE_STA tinyint = null output, @PA_INV_NOTES varchar(11) = null output, @PA_INV_NET_TOTAL decimal(19, 4) = null output, @PA_INV_VAT_TOTAL decimal(19, 4) = null output, @PA_INV_GROSS_TOTAL decimal(19, 4) = null output, @PA_INV_NET_TOTAL_BC decimal(19, 4) = null output, @PA_INV_VAT_TOTAL_BC decimal(19, 4) = null output, @PA_INV_GROSS_TOTAL_BC decimal(19, 4) = null output, @PA_INV_CURRENCY_TYPE varchar(3) = null output, @PA_INV_TYPE varchar(15) = null output, @PA_INV_ACCOUNT_TYPE varchar(5) = null output, @PA_INV_IN_RESPECT_OF varchar(255) = null output, @PA_INV_FOOTER varchar(255) = null output, @PA_INV_CREDIT_PERCENT float = null output, @PA_INV_COURSE_ID varchar(11) = null output, @PA_INV_COURSE_NAME nvarchar(250) = null output, @PA_INV_CORS_STRT_DTE datetime = null output, @PA_INV_COURSE_END_DTE datetime = null output, @PA_INV_CORS_COST_CODE varchar(40) = null output, @PA_INV_BOOK_REF varchar(100) = null output, @PA_INV_BOOKER varchar(100) = null output, @PA_INV_BOOK_ORG_NAME nvarchar(240) = null output, @PA_INV_ADD_MAILSTRING nvarchar(240) = null output, @PA_INV_BK_ORG_CUST_AC varchar(50) = null output, @PA_INV_VENUE_ORG_NAME nvarchar(240) = null output, @PA_INV_PENALTY tinyint = null output, @PA_INV_BOOK_ORG_REGI varchar(25) = null output, @PA_INV_PRINT_BOOKER tinyint = null output, @PA_INV_INV_ORG_NAME nvarchar(240) = null output, @PA_INV_EXTRA_NOTES varchar(255) = null output, @PA_INV_BAT_ID varchar(11) = null output, @PA_INV_SALES_ID varchar(11) = null output, @PA_INV_TEXT varchar(250) = null output, @PA_INV_PAY_DATE datetime = null output, @PA_INV_PAY_STATUS varchar(50) = null output, @PA_INV_PROJ_ID varchar(11) = null output, @PA_INV_CCARD_ID varchar(11) = null output, @PA_INV_RECVD float = null output, @PA_INV_RECVD_BC float = null output, @PA_INV_PERIOD varchar(8) = null output, @PA_INV_DUE_DATE datetime = null output, @PA_INV_UNPAID_VAL decimal(19, 4) = null output, @PA_INV_UNPAID_VAL_BC decimal(19, 4) = null output, @PA_INV_NOTES_ID varchar(11) = null output, @PA_INV_CRYSTAL_RPT varchar(30) = null output, @PA_INV_APP_BY varchar(11) = null output, @PA_INV_APP_DATE datetime = null output, @PA_INV_FOR_ATTN_OF nvarchar(410) = null output, @PA_INV_PRINTED tinyint = null output, @PA_INV_CURR_RATE_BC decimal(19, 8) = null output, @PA_INV_CURR_RATE_BC2 decimal(19, 8) = null output, @PA_INV_SELCO_SP_ID varchar(11) = null output, @PA_INV_MEP_ID varchar(11) = null output, @PA_INV_LT_ID varchar(11) = null output, @PA_INV_USERCHAR_1 varchar(100) = null output, @PA_INV_ACC_STATUS varchar(40) = null output, @PA_INV_ACC_REF varchar(40) = null output, @PA_INV_ACC_NOTES varchar(2000) = null output, @PA_INV_ACC_MOD_BY varchar(20) = null output, @PA_INV_ACC_MOD_DATE datetime = null output, @PA_INV_NET_TOTAL_BC2 decimal(19, 4) = null output, @PA_INV_VAT_TOTAL_BC2 decimal(19, 4) = null output, @PA_INV_GROSS_TOTAL_BC2 decimal(19, 4) = null output, @PA_INV_UNPAID_TOTAL_BC2 decimal(19, 4) = null output, @PA_INV_PRINT_BAT_ID varchar(11) = null output, @PA_INV_PERSON_PHONE varchar(25) = null output, @PA_INV_ACC_ID varchar(11) = null output, @PA_INV_BAT_ERROR tinyint = null output, @PA_INV_SALES_PROLE_ID varchar(11) = null output, @PA_INV_PROLE_ID varchar(11) = null output, @_AUDIT_USER_ID varchar(3) = null) as 
begin
  update dbo.InvHeader set
    INV_MOD_DATE = getDate(),
    INV_MOD_BY = @_AUDIT_USER_ID,
    INV_LOCK = @PA_INV_LOCK,
    INV_BOOK_ID = @PA_INV_BOOK_ID,
    INV_ORG_ID = @PA_INV_ORG_ID,
    INV_PERSON_ID = @PA_INV_PERSON_ID,
    INV_SALESMAN_ID = @PA_INV_SALESMAN_ID,
    INV_DELVRY_REF = @PA_INV_DELVRY_REF,
    INV_CARRIER = @PA_INV_CARRIER,
    INV_DELVRY_DATE = @PA_INV_DELVRY_DATE,
    INV_ORDER_DATE = @PA_INV_ORDER_DATE,
    INV_CUST_ORDER_NO = @PA_INV_CUST_ORDER_NO,
    INV_DELVRY_ADD = @PA_INV_DELVRY_ADD,
    INV_REF = @PA_INV_REF,
    INV_DATE = @PA_INV_DATE,
    INV_STATUS = @PA_INV_STATUS,
    INV_ADD = @PA_INV_ADD,
    INV_CREDIT_NTE_REF = @PA_INV_CREDIT_NTE_REF,
    INV_CREDIT_NTE_DTE = @PA_INV_CREDIT_NTE_DTE,
    INV_CREDIT_NTE_STA = @PA_INV_CREDIT_NTE_STA,
    INV_NOTES = @PA_INV_NOTES,
    INV_NET_TOTAL = @PA_INV_NET_TOTAL,
    INV_VAT_TOTAL = @PA_INV_VAT_TOTAL,
    INV_GROSS_TOTAL = @PA_INV_GROSS_TOTAL,
    INV_NET_TOTAL_BC = @PA_INV_NET_TOTAL_BC,
    INV_VAT_TOTAL_BC = @PA_INV_VAT_TOTAL_BC,
    INV_GROSS_TOTAL_BC = @PA_INV_GROSS_TOTAL_BC,
    INV_CURRENCY_TYPE = @PA_INV_CURRENCY_TYPE,
    INV_TYPE = @PA_INV_TYPE,
    INV_ACCOUNT_TYPE = @PA_INV_ACCOUNT_TYPE,
    INV_IN_RESPECT_OF = @PA_INV_IN_RESPECT_OF,
    INV_FOOTER = @PA_INV_FOOTER,
    INV_CREDIT_PERCENT = @PA_INV_CREDIT_PERCENT,
    INV_COURSE_ID = @PA_INV_COURSE_ID,
    INV_COURSE_NAME = @PA_INV_COURSE_NAME,
    INV_CORS_STRT_DTE = @PA_INV_CORS_STRT_DTE,
    INV_COURSE_END_DTE = @PA_INV_COURSE_END_DTE,
    INV_CORS_COST_CODE = @PA_INV_CORS_COST_CODE,
    INV_BOOK_REF = @PA_INV_BOOK_REF,
    INV_BOOKER = @PA_INV_BOOKER,
    INV_BOOK_ORG_NAME = @PA_INV_BOOK_ORG_NAME,
    INV_ADD_MAILSTRING = @PA_INV_ADD_MAILSTRING,
    INV_BK_ORG_CUST_AC = @PA_INV_BK_ORG_CUST_AC,
    INV_VENUE_ORG_NAME = @PA_INV_VENUE_ORG_NAME,
    INV_PENALTY = @PA_INV_PENALTY,
    INV_BOOK_ORG_REGI = @PA_INV_BOOK_ORG_REGI,
    INV_PRINT_BOOKER = @PA_INV_PRINT_BOOKER,
    INV_INV_ORG_NAME = @PA_INV_INV_ORG_NAME,
    INV_EXTRA_NOTES = @PA_INV_EXTRA_NOTES,
    INV_BAT_ID = @PA_INV_BAT_ID,
    INV_SALES_ID = @PA_INV_SALES_ID,
    INV_TEXT = @PA_INV_TEXT,
    INV_PAY_DATE = @PA_INV_PAY_DATE,
    INV_PAY_STATUS = @PA_INV_PAY_STATUS,
    INV_PROJ_ID = @PA_INV_PROJ_ID,
    INV_CCARD_ID = @PA_INV_CCARD_ID,
    INV_RECVD = @PA_INV_RECVD,
    INV_RECVD_BC = @PA_INV_RECVD_BC,
    INV_PERIOD = @PA_INV_PERIOD,
    INV_DUE_DATE = @PA_INV_DUE_DATE,
    INV_UNPAID_VAL = @PA_INV_UNPAID_VAL,
    INV_UNPAID_VAL_BC = @PA_INV_UNPAID_VAL_BC,
    INV_NOTES_ID = @PA_INV_NOTES_ID,
    INV_CRYSTAL_RPT = @PA_INV_CRYSTAL_RPT,
    INV_APP_BY = @PA_INV_APP_BY,
    INV_APP_DATE = @PA_INV_APP_DATE,
    INV_FOR_ATTN_OF = @PA_INV_FOR_ATTN_OF,
    INV_PRINTED = @PA_INV_PRINTED,
    INV_CURR_RATE_BC = @PA_INV_CURR_RATE_BC,
    INV_CURR_RATE_BC2 = @PA_INV_CURR_RATE_BC2,
    INV_SELCO_SP_ID = @PA_INV_SELCO_SP_ID,
    INV_MEP_ID = @PA_INV_MEP_ID,
    INV_LT_ID = @PA_INV_LT_ID,
    INV_USERCHAR_1 = @PA_INV_USERCHAR_1,
    INV_ACC_STATUS = @PA_INV_ACC_STATUS,
    INV_ACC_REF = @PA_INV_ACC_REF,
    INV_ACC_NOTES = @PA_INV_ACC_NOTES,
    INV_ACC_MOD_BY = @PA_INV_ACC_MOD_BY,
    INV_ACC_MOD_DATE = @PA_INV_ACC_MOD_DATE,
    INV_NET_TOTAL_BC2 = @PA_INV_NET_TOTAL_BC2,
    INV_VAT_TOTAL_BC2 = @PA_INV_VAT_TOTAL_BC2,
    INV_GROSS_TOTAL_BC2 = @PA_INV_GROSS_TOTAL_BC2,
    INV_UNPAID_TOTAL_BC2 = @PA_INV_UNPAID_TOTAL_BC2,
    INV_PRINT_BAT_ID = @PA_INV_PRINT_BAT_ID,
    INV_PERSON_PHONE = @PA_INV_PERSON_PHONE,
    INV_ACC_ID = @PA_INV_ACC_ID,
    INV_BAT_ERROR = @PA_INV_BAT_ERROR,
    INV_SALES_PROLE_ID = @PA_INV_SALES_PROLE_ID,
    INV_PROLE_ID = @PA_INV_PROLE_ID
  where INV_ID = @PA_INV_ID;
end
go
