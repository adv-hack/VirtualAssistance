AmCharts.translations.dataLoader={};AmCharts.addInitHandler(function(n){function r(e,o,s,l){undefined===l&&(l="dataProvider");s.showCurtain&&c(undefined,s.noStyles);t.remaining++;t.percentLoaded[e]=0;s.progress!==undefined&&typeof s.progress=="function"&&s._progress===undefined&&(s._progress=s.progress,s.progress=function(n){var i,r,u,f;t.percentLoaded[e]=n;i=0;r=0;for(u in t.percentLoaded)t.percentLoaded.hasOwnProperty(u)&&(r++,i+=t.percentLoaded[u]);f=Math.round(i/r*100)/100;s._progress.call(this,f,Math.round(n*100)/100,e)});AmCharts.loadFile(e,s,function(c){if(!1===c)i(s.error,s,n),u(AmCharts.__("Error loading the file",n.language)+": "+e,!1,s);else{undefined===s.format&&(s.format="json");s.format=s.format.toLowerCase();switch(s.format){case"json":if(o[l]=AmCharts.parseJSON(c),!1===o[l]){i(s.error,s,n);u(AmCharts.__("Error parsing JSON file",n.language)+": "+t.url,!1,s);o[l]=[];return}o[l]=h(o[l],s);i(s.load,s,n);break;case"csv":if(o[l]=AmCharts.parseCSV(c,s),!1===o[l]){i(s.error,s,n);u(AmCharts.__("Error parsing CSV file",n.language)+": "+t.url,!1,s);o[l]=[];return}o[l]=h(o[l],s);i(s.load,s,n);break;default:i(s.error,s,n);u(AmCharts.__("Unsupported data format",n.language)+": "+s.format,!1,s.noStyles);return}if(t.remaining--,0===t.remaining&&(i(s.complete,n),s.async))if("map"===n.type)n.validateNow(!0),f();else if("gauge"!==n.type&&n.addListener("dataUpdated",function(){"stock"!==n.type||s.reloading||undefined===n.periodSelector||n.periodSelector.setDefaultPeriod();f();n.events.dataUpdated.pop()}),n.validateData(),"gauge"===n.type&&f(),t.startDuration)if("stock"===n.type){n.panelsSettings.startDuration=t.startDuration;for(var a=0;a<n.panels.length;a++)n.panels[a].startDuration=t.startDuration,n.panels[a].animateAgain()}else n.startDuration=t.startDuration,n.animateAgain!==undefined&&n.animateAgain();s.reload&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(r,1e3*s.reload,e,o,s,l),s.reloading=!0)}})}function h(i,r){if(undefined!==r.postProcess&&a(r.postProcess))try{return r.postProcess.call(t,i,r,n)}catch(f){return u(AmCharts.__("Error loading file",n.language)+": "+r.url,!1,r),i}else return i}function l(n){return"object"==typeof n}function a(n){return"function"==typeof n}function s(n){for(var t in o)o.hasOwnProperty(t)&&v(n,t,o[t])}function v(n,t,i){undefined===n[t]&&(n[t]=i)}function u(n,t,i){i.showErrors?c(n,i.noStyles):(f(),console.log(n))}function c(i,r){f();undefined===i&&(i=AmCharts.__("Loading data...",n.language));var u=document.createElement("div");if(u.setAttribute("id",n.div.id+"-curtain"),u.className="amcharts-dataloader-curtain",!0!==r){u.style.position="absolute";u.style.top=0;u.style.left=0;u.style.width=(undefined!==n.realWidth?n.realWidth:n.divRealWidth)+"px";u.style.height=(undefined!==n.realHeight?n.realHeight:n.divRealHeight)+"px";u.style.textAlign="center";u.style.display="table";u.style.fontSize="20px";try{u.style.background="rgba(255, 255, 255, 0.3)"}catch(e){u.style.background="rgb(255, 255, 255)"}u.innerHTML='<div style="display: table-cell; vertical-align: middle;">'+i+"<\/div>"}else u.innerHTML=i;n.containerDiv.appendChild(u);t.curtain=u}function f(){try{undefined!==t.curtain&&n.containerDiv.removeChild(t.curtain)}catch(i){}t.curtain=undefined}function i(n,i,r,u){"function"==typeof n&&n.call(t,i,r,u)}var e,t,o;(undefined!==n.dataLoader&&l(n.dataLoader)||(n.dataLoader={}),e=n.version.split("."),Number(e[0])<3||3===Number(e[0])&&Number(e[1])<13)||(t=n.dataLoader,t.remaining=0,t.percentLoaded={},o={async:!0,format:"json",showErrors:!0,showCurtain:!0,noStyles:!1,reload:0,timestamp:!1,delimiter:",",skip:0,skipEmpty:!0,emptyAs:undefined,useColumnNames:!1,init:!1,progress:!1,reverse:!1,reloading:!1,complete:!1,error:!1,numberFields:[],headers:[],chart:n},t.loadData=function(){if("stock"===n.type)setTimeout(function(){var f,u;for(0>n.panelsSettings.startDuration&&(t.startDuration=n.panelsSettings.startDuration,n.panelsSettings.startDuration=0),f=0;f<n.dataSets.length;f++)u=n.dataSets[f],undefined!==u.dataLoader&&undefined!==u.dataLoader.url&&(i(u.dataLoader.init,u.dataLoader,n),u.dataProvider=[],s(u.dataLoader),r(u.dataLoader.url,u,u.dataLoader,"dataProvider")),undefined!==u.eventDataLoader&&undefined!==u.eventDataLoader.url&&(i(u.eventDataLoader.init,u.eventDataLoader,n),u.events=[],s(u.eventDataLoader),r(u.eventDataLoader.url,u,u.eventDataLoader,"stockEvents"))},100);else{if(i(t.init,t,n),s(t),undefined===t.url)return;undefined!==n.startDuration&&0<n.startDuration&&(t.startDuration=n.startDuration,n.startDuration=0);"gauge"===n.type?(undefined===n.arrows&&(n.arrows=[]),r(t.url,n,t,"arrows")):(undefined===n.dataProvider&&(n.dataProvider=n.type==="map"?{}:[]),r(t.url,n,t,"dataProvider"))}},t.loadData())},["pie","serial","xy","funnel","radar","gauge","gantt","stock","map"]);undefined===AmCharts.__&&(AmCharts.__=function(n,t){return undefined!==t&&undefined!==AmCharts.translations.dataLoader[t]&&undefined!==AmCharts.translations.dataLoader[t][n]?AmCharts.translations.dataLoader[t][n]:n});AmCharts.loadFile=function(n,t,i){var r,u,f;typeof t!="object"&&(t={});t.async===undefined&&(t.async=!0);r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");try{r.open("GET",t.timestamp?AmCharts.timestampUrl(n):n,t.async)}catch(e){i.call(this,!1)}if(t.headers!==undefined&&t.headers.length)for(u=0;u<t.headers.length;u++)f=t.headers[u],r.setRequestHeader(f.key,f.value);t.progress!==undefined&&typeof t.progress=="function"&&(r.onprogress=function(n){var i=n.loaded/n.total*100;t.progress.call(this,i)});r.onreadystatechange=function(){4===r.readyState&&404===r.status?i.call(this,!1):4===r.readyState&&200===r.status&&i.call(this,r.responseText)};try{r.send()}catch(e){i.call(this,!1)}};AmCharts.parseJSON=function(response){try{return undefined!==JSON?JSON.parse(response):eval(response)}catch(e){return!1}};AmCharts.parseCSV=function(n,t){var s=AmCharts.CSVToArray(n,t.delimiter),c=t.numberFields&&t.numberFields.length>0,h=[],u=[],r,i,f,e,o;if(t.useColumnNames){for(u=s.shift(),f=0;f<u.length;f++)r=u[f].replace(/^\s+|\s+$/gm,""),""===r&&(r="col"+f),u[f]=r;0<t.skip&&t.skip--}for(i=0;i<t.skip;i++)s.shift();while(e=t.reverse?s.pop():s.shift())if(!t.skipEmpty||e.length!==1||e[0]!==""){for(o={},i=0;i<e.length;i++)r=undefined===u[i]?"col"+i:u[i],o[r]=e[i]===""?t.emptyAs:e[i],c&&t.numberFields.indexOf(r)!==-1&&(o[r]=Number(o[r]));h.push(o)}return h};AmCharts.CSVToArray=function(n,t){var u,f;t=t||",";for(var e=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),r=[[]],i=null;i=e.exec(n);)u=i[1],u.length&&u!==t&&r.push([]),f=i[2]?i[2].replace(new RegExp('""',"g"),'"'):i[3],r[r.length-1].push(f);return r};AmCharts.timestampUrl=function(n){var t=n.split("?");return 1===t.length?t[1]=(new Date).getTime():t[1]+="&"+(new Date).getTime(),t.join("?")};
//# sourceMappingURL=dataloader.min.js.map
